<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sam's Simple Budget</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="icon" type="image/png" href="./favicon-D_-qoDlh.png">
  <script type="module" crossorigin>(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();const ue="modulepreload",fe=function(r,e){return new URL(r,e).href},G={},ee=function(e,t,n){let i=Promise.resolve();if(t&&t.length>0){let c=function(l){return Promise.all(l.map(u=>Promise.resolve(u).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};const a=document.getElementsByTagName("link"),o=document.querySelector("meta[property=csp-nonce]"),d=o?.nonce||o?.getAttribute("nonce");i=c(t.map(l=>{if(l=fe(l,n),l in G)return;G[l]=!0;const u=l.endsWith(".css"),y=u?'[rel="stylesheet"]':"";if(n)for(let h=a.length-1;h>=0;h--){const b=a[h];if(b.href===l&&(!u||b.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${l}"]${y}`))return;const p=document.createElement("link");if(p.rel=u?"stylesheet":ue,u||(p.as="script"),p.crossOrigin="",p.href=l,d&&p.setAttribute("nonce",d),document.head.appendChild(p),u)return new Promise((h,b)=>{p.addEventListener("load",h),p.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return i.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})};const he=r=>{const e=new Map;e.set("web",{name:"web"});const t=r.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:e},n=(s,a)=>{t.platforms.set(s,a)},i=s=>{t.platforms.has(s)&&(t.currentPlatform=t.platforms.get(s))};return t.addPlatform=n,t.setPlatform=i,t},pe=r=>r.CapacitorPlatforms=he(r),te=pe(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});te.addPlatform;te.setPlatform;var _;(function(r){r.Unimplemented="UNIMPLEMENTED",r.Unavailable="UNAVAILABLE"})(_||(_={}));class W extends Error{constructor(e,t,n){super(e),this.message=e,this.code=t,this.data=n}}const ge=r=>{var e,t;return r?.androidBridge?"android":!((t=(e=r?.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||t===void 0)&&t.bridge?"ios":"web"},me=r=>{var e,t,n,i,s;const a=r.CapacitorCustomPlatform||null,o=r.Capacitor||{},d=o.Plugins=o.Plugins||{},c=r.CapacitorPlatforms,l=()=>a!==null?a.name:ge(r),u=((e=c?.currentPlatform)===null||e===void 0?void 0:e.getPlatform)||l,y=()=>u()!=="web",p=((t=c?.currentPlatform)===null||t===void 0?void 0:t.isNativePlatform)||y,h=g=>{const m=M.get(g);return!!(m?.platforms.has(u())||B(g))},b=((n=c?.currentPlatform)===null||n===void 0?void 0:n.isPluginAvailable)||h,x=g=>{var m;return(m=o.PluginHeaders)===null||m===void 0?void 0:m.find(I=>I.name===g)},B=((i=c?.currentPlatform)===null||i===void 0?void 0:i.getPluginHeader)||x,ie=g=>r.console.error(g),se=(g,m,I)=>Promise.reject(`${I} does not have an implementation of "${m}".`),M=new Map,oe=(g,m={})=>{const I=M.get(g);if(I)return console.warn(`Capacitor plugin "${g}" already registered. Cannot register plugins twice.`),I.proxy;const k=u(),R=B(g);let C;const ce=async()=>(!C&&k in m?C=typeof m[k]=="function"?C=await m[k]():C=m[k]:a!==null&&!C&&"web"in m&&(C=typeof m.web=="function"?C=await m.web():C=m.web),C),de=(w,v)=>{var L,O;if(R){const S=R?.methods.find(E=>v===E.name);if(S)return S.rtype==="promise"?E=>o.nativePromise(g,v.toString(),E):(E,$)=>o.nativeCallback(g,v.toString(),E,$);if(w)return(L=w[v])===null||L===void 0?void 0:L.bind(w)}else{if(w)return(O=w[v])===null||O===void 0?void 0:O.bind(w);throw new W(`"${g}" plugin is not implemented on ${k}`,_.Unimplemented)}},H=w=>{let v;const L=(...O)=>{const S=ce().then(E=>{const $=de(E,w);if($){const F=$(...O);return v=F?.remove,F}else throw new W(`"${g}.${w}()" is not implemented on ${k}`,_.Unimplemented)});return w==="addListener"&&(S.remove=async()=>v()),S};return L.toString=()=>`${w.toString()}() { [capacitor code] }`,Object.defineProperty(L,"name",{value:w,writable:!1,configurable:!1}),L},K=H("addListener"),V=H("removeListener"),le=(w,v)=>{const L=K({eventName:w},v),O=async()=>{const E=await L;V({eventName:w,callbackId:E},v)},S=new Promise(E=>L.then(()=>E({remove:O})));return S.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await O()},S},N=new Proxy({},{get(w,v){switch(v){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return R?le:K;case"removeListener":return V;default:return H(v)}}});return d[g]=N,M.set(g,{name:g,proxy:N,platforms:new Set([...Object.keys(m),...R?[k]:[]])}),N},ae=((s=c?.currentPlatform)===null||s===void 0?void 0:s.registerPlugin)||oe;return o.convertFileSrc||(o.convertFileSrc=g=>g),o.getPlatform=u,o.handleError=ie,o.isNativePlatform=p,o.isPluginAvailable=b,o.pluginMethodNoop=se,o.registerPlugin=ae,o.Exception=W,o.DEBUG=!!o.DEBUG,o.isLoggingEnabled=!!o.isLoggingEnabled,o.platform=o.getPlatform(),o.isNative=o.isNativePlatform(),o},ye=r=>r.Capacitor=me(r),A=ye(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),D=A.registerPlugin;A.Plugins;class T{constructor(e){this.listeners={},this.retainedEventArguments={},this.windowListeners={},e&&(console.warn(`Capacitor WebPlugin "${e.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=e)}addListener(e,t){let n=!1;this.listeners[e]||(this.listeners[e]=[],n=!0),this.listeners[e].push(t);const s=this.windowListeners[e];s&&!s.registered&&this.addWindowListener(s),n&&this.sendRetainedArgumentsForEvent(e);const a=async()=>this.removeListener(e,t);return Promise.resolve({remove:a})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t,n){const i=this.listeners[e];if(!i){if(n){let s=this.retainedEventArguments[e];s||(s=[]),s.push(t),this.retainedEventArguments[e]=s}return}i.forEach(s=>s(t))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:n=>{this.notifyListeners(t,n)}}}unimplemented(e="not implemented"){return new A.Exception(e,_.Unimplemented)}unavailable(e="not available"){return new A.Exception(e,_.Unavailable)}async removeListener(e,t){const n=this.listeners[e];if(!n)return;const i=n.indexOf(t);this.listeners[e].splice(i,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach(n=>{this.notifyListeners(e,n)}))}}const J=r=>encodeURIComponent(r).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),X=r=>r.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class be extends T{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(n=>{if(n.length<=0)return;let[i,s]=n.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");i=X(i).trim(),s=X(s).trim(),t[i]=s}),t}async setCookie(e){try{const t=J(e.key),n=J(e.value),i=`; expires=${(e.expires||"").replace("expires=","")}`,s=(e.path||"/").replace("path=",""),a=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${n||""}${i}; path=${s}; ${a};`}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}D("CapacitorCookies",{web:()=>new be});const we=async r=>new Promise((e,t)=>{const n=new FileReader;n.onload=()=>{const i=n.result;e(i.indexOf(",")>=0?i.split(",")[1]:i)},n.onerror=i=>t(i),n.readAsDataURL(r)}),ve=(r={})=>{const e=Object.keys(r);return Object.keys(r).map(i=>i.toLocaleLowerCase()).reduce((i,s,a)=>(i[s]=r[e[a]],i),{})},Pe=(r,e=!0)=>r?Object.entries(r).reduce((n,i)=>{const[s,a]=i;let o,d;return Array.isArray(a)?(d="",a.forEach(c=>{o=e?encodeURIComponent(c):c,d+=`${s}=${o}&`}),d.slice(0,-1)):(o=e?encodeURIComponent(a):a,d=`${s}=${o}`),`${n}&${d}`},"").substr(1):null,ne=(r,e={})=>{const t=Object.assign({method:r.method||"GET",headers:r.headers},e),i=ve(r.headers)["content-type"]||"";if(typeof r.data=="string")t.body=r.data;else if(i.includes("application/x-www-form-urlencoded")){const s=new URLSearchParams;for(const[a,o]of Object.entries(r.data||{}))s.set(a,o);t.body=s.toString()}else if(i.includes("multipart/form-data")||r.data instanceof FormData){const s=new FormData;if(r.data instanceof FormData)r.data.forEach((o,d)=>{s.append(d,o)});else for(const o of Object.keys(r.data))s.append(o,r.data[o]);t.body=s;const a=new Headers(t.headers);a.delete("content-type"),t.headers=a}else(i.includes("application/json")||typeof r.data=="object")&&(t.body=JSON.stringify(r.data));return t};class Ee extends T{async request(e){const t=ne(e,e.webFetchExtra),n=Pe(e.params,e.shouldEncodeUrlParams),i=n?`${e.url}?${n}`:e.url,s=await fetch(i,t),a=s.headers.get("content-type")||"";let{responseType:o="text"}=s.ok?e:{};a.includes("application/json")&&(o="json");let d,c;switch(o){case"arraybuffer":case"blob":c=await s.blob(),d=await we(c);break;case"json":d=await s.json();break;default:d=await s.text()}const l={};return s.headers.forEach((u,y)=>{l[y]=u}),{data:d,headers:l,status:s.status,url:s.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}D("CapacitorHttp",{web:()=>new Ee});const Le=D("Share",{web:()=>ee(()=>Promise.resolve().then(()=>$e),void 0,import.meta.url).then(r=>new r.ShareWeb)});function xe(r){r.CapacitorUtils.Synapse=new Proxy({},{get(e,t){return new Proxy({},{get(n,i){return(s,a,o)=>{const d=r.Capacitor.Plugins[t];if(d===void 0){o(new Error(`Capacitor plugin ${t} not found`));return}if(typeof d[i]!="function"){o(new Error(`Method ${i} not found in Capacitor plugin ${t}`));return}(async()=>{try{const c=await d[i](s);a(c)}catch(c){o(c)}})()}}})}})}function Ce(r){r.CapacitorUtils.Synapse=new Proxy({},{get(e,t){return r.cordova.plugins[t]}})}function Be(r=!1){typeof window>"u"||(window.CapacitorUtils=window.CapacitorUtils||{},window.Capacitor!==void 0&&!r?xe(window):window.cordova!==void 0&&Ce(window))}var z;(function(r){r.Documents="DOCUMENTS",r.Data="DATA",r.Library="LIBRARY",r.Cache="CACHE",r.External="EXTERNAL",r.ExternalStorage="EXTERNAL_STORAGE",r.ExternalCache="EXTERNAL_CACHE",r.LibraryNoCloud="LIBRARY_NO_CLOUD",r.Temporary="TEMPORARY"})(z||(z={}));var j;(function(r){r.UTF8="utf8",r.ASCII="ascii",r.UTF16="utf16"})(j||(j={}));const Oe=D("Filesystem",{web:()=>ee(()=>Promise.resolve().then(()=>je),void 0,import.meta.url).then(r=>new r.FilesystemWeb)});Be();let P={budget:0,entries:[]};const f={remainingAmount:document.getElementById("remainingAmount"),budgetDisplay:document.getElementById("budgetDisplay"),budgetInput:document.getElementById("budgetInput"),budgetEdit:document.getElementById("budgetEdit"),editBudgetBtn:document.getElementById("editBudgetBtn"),saveBudgetBtn:document.getElementById("saveBudgetBtn"),descInput:document.getElementById("descInput"),amountInput:document.getElementById("amountInput"),addBtn:document.getElementById("addBtn"),entriesList:document.getElementById("entriesList"),backupBtn:document.getElementById("backupBtn"),resetBtn:document.getElementById("resetBtn")};document.addEventListener("DOMContentLoaded",()=>{ke(),re(),Se()});function Se(){f.editBudgetBtn.addEventListener("click",()=>{f.budgetEdit.classList.remove("hidden"),f.budgetInput.value=P.budget||"",f.editBudgetBtn.classList.add("hidden"),f.budgetInput.focus()}),f.saveBudgetBtn.addEventListener("click",Y),f.budgetInput.addEventListener("keypress",r=>{r.key==="Enter"&&Y()}),f.addBtn.addEventListener("click",Q),f.amountInput.addEventListener("keypress",r=>{r.key==="Enter"&&Q()}),f.entriesList.addEventListener("click",r=>{const e=r.target.closest(".delete-btn");if(e){const t=parseInt(e.dataset.id);Ie(t)}}),f.backupBtn.addEventListener("click",Re),f.resetBtn.addEventListener("click",_e)}function ke(){const r=localStorage.getItem("samsBudget_v1");r&&(P=JSON.parse(r))}function q(){localStorage.setItem("samsBudget_v1",JSON.stringify(P)),re()}function Y(){const r=parseFloat(f.budgetInput.value);!isNaN(r)&&r>=0&&(P.budget=r,q()),f.budgetEdit.classList.add("hidden"),f.editBudgetBtn.classList.remove("hidden")}function Q(){const r=f.descInput.value.trim()||"Expense",e=parseFloat(f.amountInput.value);if(isNaN(e)||e<=0){alert("Please enter a valid amount.");return}const t={id:Date.now(),desc:r,amount:e,date:new Date().toLocaleDateString()};P.entries.unshift(t),q(),f.descInput.value="",f.amountInput.value="",f.descInput.focus()}function Ie(r){confirm("Delete this entry?")&&(P.entries=P.entries.filter(e=>e.id!==r),q())}async function Re(){const r=JSON.stringify(P,null,2),e=`budget-backup-${new Date().toISOString().split("T")[0]}.json`;if(A.isNativePlatform())try{const t=await Oe.writeFile({path:e,data:r,directory:z.Cache,encoding:j.UTF8});await Le.share({title:"Backup Data",text:"Here is your budget backup.",url:t.uri,dialogTitle:"Export Budget Backup"})}catch(t){console.error("Export failed",t),alert("Export failed: "+t.message)}else{const t=new Blob([r],{type:"application/json"}),n=URL.createObjectURL(t),i=document.createElement("a");i.href=n,i.download=e,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(n)}}function _e(){confirm("Are you sure you want to reset all data? This cannot be undone.")&&(P={budget:0,entries:[]},q(),f.budgetInput.value="",f.budgetEdit.classList.add("hidden"),f.editBudgetBtn.classList.remove("hidden"))}function re(){const r=P.entries.reduce((t,n)=>t+n.amount,0),e=P.budget-r;f.budgetDisplay.textContent=`$${P.budget.toFixed(2)}`,f.remainingAmount.textContent=e.toFixed(2),e<0?f.remainingAmount.style.color="#d32f2f":f.remainingAmount.style.color="#1a1a1a",f.entriesList.innerHTML="",P.entries.forEach(t=>{const n=document.createElement("li");n.className="entry-item",n.innerHTML=`
            <div class="entry-info">
                <h3>${t.desc}</h3>
                <p>${t.date}</p>
            </div>
            <div class="entry-actions">
                <span class="amount">-$${t.amount.toFixed(2)}</span>
                <button class="delete-btn" data-id="${t.id}" title="Delete">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="3 6 5 6 21 6"></polyline>
                        <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                    </svg>
                </button>
            </div>
        `,f.entriesList.appendChild(n)})}class Ae extends T{async canShare(){return typeof navigator>"u"||!navigator.share?{value:!1}:{value:!0}}async share(e){if(typeof navigator>"u"||!navigator.share)throw this.unavailable("Share API not available in this browser");return await navigator.share({title:e.title,text:e.text,url:e.url}),{}}}const $e=Object.freeze(Object.defineProperty({__proto__:null,ShareWeb:Ae},Symbol.toStringTag,{value:"Module"}));function Z(r){const e=r.split("/").filter(n=>n!=="."),t=[];return e.forEach(n=>{n===".."&&t.length>0&&t[t.length-1]!==".."?t.pop():t.push(n)}),t.join("/")}function Fe(r,e){r=Z(r),e=Z(e);const t=r.split("/"),n=e.split("/");return r!==e&&t.every((i,s)=>i===n[s])}class U extends T{constructor(){super(...arguments),this.DB_VERSION=1,this.DB_NAME="Disc",this._writeCmds=["add","put","delete"],this.downloadFile=async e=>{var t,n;const i=ne(e,e.webFetchExtra),s=await fetch(e.url,i);let a;if(!e.progress)a=await s.blob();else if(!s?.body)a=new Blob;else{const d=s.body.getReader();let c=0;const l=[],u=s.headers.get("content-type"),y=parseInt(s.headers.get("content-length")||"0",10);for(;;){const{done:b,value:x}=await d.read();if(b)break;l.push(x),c+=x?.length||0;const B={url:e.url,bytes:c,contentLength:y};this.notifyListeners("progress",B)}const p=new Uint8Array(c);let h=0;for(const b of l)typeof b>"u"||(p.set(b,h),h+=b.length);a=new Blob([p.buffer],{type:u||void 0})}return{path:(await this.writeFile({path:e.path,directory:(t=e.directory)!==null&&t!==void 0?t:void 0,recursive:(n=e.recursive)!==null&&n!==void 0?n:!1,data:a})).uri,blob:a}}}readFileInChunks(e,t){throw this.unavailable("Method not implemented.")}async initDb(){if(this._db!==void 0)return this._db;if(!("indexedDB"in window))throw this.unavailable("This browser doesn't support IndexedDB");return new Promise((e,t)=>{const n=indexedDB.open(this.DB_NAME,this.DB_VERSION);n.onupgradeneeded=U.doUpgrade,n.onsuccess=()=>{this._db=n.result,e(n.result)},n.onerror=()=>t(n.error),n.onblocked=()=>{console.warn("db blocked")}})}static doUpgrade(e){const n=e.target.result;switch(e.oldVersion){default:n.objectStoreNames.contains("FileStorage")&&n.deleteObjectStore("FileStorage"),n.createObjectStore("FileStorage",{keyPath:"path"}).createIndex("by_folder","folder")}}async dbRequest(e,t){const n=this._writeCmds.indexOf(e)!==-1?"readwrite":"readonly";return this.initDb().then(i=>new Promise((s,a)=>{const c=i.transaction(["FileStorage"],n).objectStore("FileStorage")[e](...t);c.onsuccess=()=>s(c.result),c.onerror=()=>a(c.error)}))}async dbIndexRequest(e,t,n){const i=this._writeCmds.indexOf(t)!==-1?"readwrite":"readonly";return this.initDb().then(s=>new Promise((a,o)=>{const u=s.transaction(["FileStorage"],i).objectStore("FileStorage").index(e)[t](...n);u.onsuccess=()=>a(u.result),u.onerror=()=>o(u.error)}))}getPath(e,t){const n=t!==void 0?t.replace(/^[/]+|[/]+$/g,""):"";let i="";return e!==void 0&&(i+="/"+e),t!==""&&(i+="/"+n),i}async clear(){(await this.initDb()).transaction(["FileStorage"],"readwrite").objectStore("FileStorage").clear()}async readFile(e){const t=this.getPath(e.directory,e.path),n=await this.dbRequest("get",[t]);if(n===void 0)throw Error("File does not exist.");return{data:n.content?n.content:""}}async writeFile(e){const t=this.getPath(e.directory,e.path);let n=e.data;const i=e.encoding,s=e.recursive,a=await this.dbRequest("get",[t]);if(a&&a.type==="directory")throw Error("The supplied path is a directory.");const o=t.substr(0,t.lastIndexOf("/"));if(await this.dbRequest("get",[o])===void 0){const u=o.indexOf("/",1);if(u!==-1){const y=o.substr(u);await this.mkdir({path:y,directory:e.directory,recursive:s})}}if(!i&&!(n instanceof Blob)&&(n=n.indexOf(",")>=0?n.split(",")[1]:n,!this.isBase64String(n)))throw Error("The supplied data is not valid base64 content.");const c=Date.now(),l={path:t,folder:o,type:"file",size:n instanceof Blob?n.size:n.length,ctime:c,mtime:c,content:n};return await this.dbRequest("put",[l]),{uri:l.path}}async appendFile(e){const t=this.getPath(e.directory,e.path);let n=e.data;const i=e.encoding,s=t.substr(0,t.lastIndexOf("/")),a=Date.now();let o=a;const d=await this.dbRequest("get",[t]);if(d&&d.type==="directory")throw Error("The supplied path is a directory.");if(await this.dbRequest("get",[s])===void 0){const u=s.indexOf("/",1);if(u!==-1){const y=s.substr(u);await this.mkdir({path:y,directory:e.directory,recursive:!0})}}if(!i&&!this.isBase64String(n))throw Error("The supplied data is not valid base64 content.");if(d!==void 0){if(d.content instanceof Blob)throw Error("The occupied entry contains a Blob object which cannot be appended to.");d.content!==void 0&&!i?n=btoa(atob(d.content)+atob(n)):n=d.content+n,o=d.ctime}const l={path:t,folder:s,type:"file",size:n.length,ctime:o,mtime:a,content:n};await this.dbRequest("put",[l])}async deleteFile(e){const t=this.getPath(e.directory,e.path);if(await this.dbRequest("get",[t])===void 0)throw Error("File does not exist.");if((await this.dbIndexRequest("by_folder","getAllKeys",[IDBKeyRange.only(t)])).length!==0)throw Error("Folder is not empty.");await this.dbRequest("delete",[t])}async mkdir(e){const t=this.getPath(e.directory,e.path),n=e.recursive,i=t.substr(0,t.lastIndexOf("/")),s=(t.match(/\//g)||[]).length,a=await this.dbRequest("get",[i]),o=await this.dbRequest("get",[t]);if(s===1)throw Error("Cannot create Root directory");if(o!==void 0)throw Error("Current directory does already exist.");if(!n&&s!==2&&a===void 0)throw Error("Parent directory must exist");if(n&&s!==2&&a===void 0){const l=i.substr(i.indexOf("/",1));await this.mkdir({path:l,directory:e.directory,recursive:n})}const d=Date.now(),c={path:t,folder:i,type:"directory",size:0,ctime:d,mtime:d};await this.dbRequest("put",[c])}async rmdir(e){const{path:t,directory:n,recursive:i}=e,s=this.getPath(n,t),a=await this.dbRequest("get",[s]);if(a===void 0)throw Error("Folder does not exist.");if(a.type!=="directory")throw Error("Requested path is not a directory");const o=await this.readdir({path:t,directory:n});if(o.files.length!==0&&!i)throw Error("Folder is not empty");for(const d of o.files){const c=`${t}/${d.name}`;(await this.stat({path:c,directory:n})).type==="file"?await this.deleteFile({path:c,directory:n}):await this.rmdir({path:c,directory:n,recursive:i})}await this.dbRequest("delete",[s])}async readdir(e){const t=this.getPath(e.directory,e.path),n=await this.dbRequest("get",[t]);if(e.path!==""&&n===void 0)throw Error("Folder does not exist.");const i=await this.dbIndexRequest("by_folder","getAllKeys",[IDBKeyRange.only(t)]);return{files:await Promise.all(i.map(async a=>{let o=await this.dbRequest("get",[a]);return o===void 0&&(o=await this.dbRequest("get",[a+"/"])),{name:a.substring(t.length+1),type:o.type,size:o.size,ctime:o.ctime,mtime:o.mtime,uri:o.path}}))}}async getUri(e){const t=this.getPath(e.directory,e.path);let n=await this.dbRequest("get",[t]);return n===void 0&&(n=await this.dbRequest("get",[t+"/"])),{uri:n?.path||t}}async stat(e){const t=this.getPath(e.directory,e.path);let n=await this.dbRequest("get",[t]);if(n===void 0&&(n=await this.dbRequest("get",[t+"/"])),n===void 0)throw Error("Entry does not exist.");return{name:n.path.substring(t.length+1),type:n.type,size:n.size,ctime:n.ctime,mtime:n.mtime,uri:n.path}}async rename(e){await this._copy(e,!0)}async copy(e){return this._copy(e,!1)}async requestPermissions(){return{publicStorage:"granted"}}async checkPermissions(){return{publicStorage:"granted"}}async _copy(e,t=!1){let{toDirectory:n}=e;const{to:i,from:s,directory:a}=e;if(!i||!s)throw Error("Both to and from must be provided");n||(n=a);const o=this.getPath(a,s),d=this.getPath(n,i);if(o===d)return{uri:d};if(Fe(o,d))throw Error("To path cannot contain the from path");let c;try{c=await this.stat({path:i,directory:n})}catch{const h=i.split("/");h.pop();const b=h.join("/");if(h.length>0&&(await this.stat({path:b,directory:n})).type!=="directory")throw new Error("Parent directory of the to path is a file")}if(c&&c.type==="directory")throw new Error("Cannot overwrite a directory with a file");const l=await this.stat({path:s,directory:a}),u=async(p,h,b)=>{const x=this.getPath(n,p),B=await this.dbRequest("get",[x]);B.ctime=h,B.mtime=b,await this.dbRequest("put",[B])},y=l.ctime?l.ctime:Date.now();switch(l.type){case"file":{const p=await this.readFile({path:s,directory:a});t&&await this.deleteFile({path:s,directory:a});let h;!(p.data instanceof Blob)&&!this.isBase64String(p.data)&&(h=j.UTF8);const b=await this.writeFile({path:i,directory:n,data:p.data,encoding:h});return t&&await u(i,y,l.mtime),b}case"directory":{if(c)throw Error("Cannot move a directory over an existing object");try{await this.mkdir({path:i,directory:n,recursive:!1}),t&&await u(i,y,l.mtime)}catch{}const p=(await this.readdir({path:s,directory:a})).files;for(const h of p)await this._copy({from:`${s}/${h.name}`,to:`${i}/${h.name}`,directory:a,toDirectory:n},t);t&&await this.rmdir({path:s,directory:a})}}return{uri:d}}isBase64String(e){try{return btoa(atob(e))==e}catch{return!1}}}U._debug=!0;const je=Object.freeze(Object.defineProperty({__proto__:null,FilesystemWeb:U},Symbol.toStringTag,{value:"Module"}));</script>
  <style rel="stylesheet" crossorigin>:root{--primary-color: #2e7d32;--primary-light: #e8f5e9;--text-dark: #1a1a1a;--text-gray: #666666;--bg-color: #f5f5f5;--card-bg: #ffffff;--danger: #d32f2f;--font-family: "Inter", system-ui, -apple-system, sans-serif}*{box-sizing:border-box;margin:0;padding:0}body{font-family:var(--font-family);background-color:var(--bg-color);color:var(--text-dark);line-height:1.5;height:100vh;display:flex;justify-content:center}.app-container{width:100%;max-width:480px;background-color:var(--bg-color);padding:20px;height:100%;overflow-y:auto;display:flex;flex-direction:column;gap:20px}header{display:flex;justify-content:space-between;align-items:center;padding-bottom:10px}h1{font-weight:700;font-size:1.5rem;color:var(--primary-color)}.icon-btn{background:none;border:none;cursor:pointer;color:var(--primary-color);padding:5px}h2{font-size:1.1rem;color:var(--text-gray);margin-bottom:10px;font-weight:600}.summary-card{background:var(--card-bg);border-radius:16px;padding:24px;box-shadow:0 4px 6px -1px #0000001a;display:flex;flex-direction:column;align-items:center;gap:16px}.label{font-size:.9rem;color:var(--text-gray);text-transform:uppercase;letter-spacing:.05em}.amount-display{font-size:3rem;font-weight:700;color:var(--text-dark);display:flex;align-items:flex-start}.currency{font-size:1.5rem;margin-top:8px;margin-right:4px;color:var(--text-gray)}.budget-info{width:100%;border-top:1px solid var(--bg-color);padding-top:16px;display:flex;flex-direction:column;gap:8px;font-size:.9rem}.budget-info .row{display:flex;justify-content:space-between;width:100%;color:var(--text-gray)}.text-btn{background:none;border:none;color:var(--primary-color);font-size:.85rem;font-weight:600;cursor:pointer;align-self:flex-end}.budget-edit{display:flex;gap:8px;width:100%}.hidden{display:none!important}input{width:100%;padding:12px 16px;border:1px solid transparent;background-color:#fff;border-radius:12px;font-size:1rem;font-family:inherit;transition:all .2s;box-shadow:0 2px 4px #0000000d}input:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px var(--primary-light)}.add-entry-section{display:flex;flex-direction:column;gap:12px}.input-group.row{display:flex;gap:12px}#addBtn,#saveBudgetBtn,.danger-btn{background-color:var(--primary-color);color:#fff;border:none;border-radius:12px;padding:0 24px;font-weight:600;cursor:pointer;transition:opacity .2s;white-space:nowrap}.danger-btn{background-color:var(--danger)!important}#addBtn:hover,#saveBudgetBtn:hover{opacity:.9}.transactions-list ul{list-style:none;display:flex;flex-direction:column;gap:10px}.entry-item{background:var(--card-bg);padding:16px;border-radius:12px;display:flex;justify-content:space-between;align-items:center;box-shadow:0 1px 2px #0000000d;animation:slideIn .3s ease-out}.entry-info h3{font-size:1rem;font-weight:500;color:var(--text-dark)}.entry-info p{font-size:.8rem;color:var(--text-gray);margin-top:2px}.entry-actions{display:flex;align-items:center;gap:12px}.amount{font-weight:600;font-size:1rem;color:var(--danger)}.delete-btn{background:none;border:none;color:#bdbdbd;cursor:pointer;padding:4px;display:flex;align-items:center;justify-content:center}.delete-btn:hover{color:var(--danger)}@keyframes slideIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}</style>
</head>

<body>
    <div class="app-container">
        <header>
            <h1>Sam's Simple Budget</h1>
            <button id="backupBtn" class="icon-btn" title="Backup Data">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                    <polyline points="7 10 12 15 17 10"></polyline>
                    <line x1="12" y1="15" x2="12" y2="3"></line>
                </svg>
            </button>
        </header>

        <section class="summary-card">
            <div class="balance-info">
                <span class="label">Remaining</span>
                <div class="amount-display">
                    <span class="currency">$</span>
                    <span id="remainingAmount">0.00</span>
                </div>
            </div>
            <div class="budget-info">
                <div class="row">
                    <span>Monthly Budget</span>
                    <span id="budgetDisplay">$0.00</span>
                </div>
                <!-- Hidden input for editing budget -->
                <div class="budget-edit hidden" id="budgetEdit">
                    <input type="number" id="budgetInput" placeholder="Set Budget">
                    <button id="saveBudgetBtn">Save</button>
                    <button id="resetBtn" class="danger-btn">Reset Data</button>
                </div>
                <button id="editBudgetBtn" class="text-btn">Edit</button>
            </div>
        </section>

        <section class="add-entry-section">
            <div class="input-group">
                <input type="text" id="descInput" placeholder="What was it for?">
            </div>
            <div class="input-group row">
                <input type="number" id="amountInput" placeholder="0.00">
                <button id="addBtn">Add</button>
            </div>
        </section>

        <section class="transactions-list">
            <h2>Recent Entries</h2>
            <ul id="entriesList">
                <!-- Entries will be injected here -->
            </ul>
        </section>
    </div>

</body>

</html>